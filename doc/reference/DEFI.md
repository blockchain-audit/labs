# DEFI Overview

**1. Liquid Staking:** Earn staking rewards without locking your tokens.

**Transaction Flow:**

- Alice sends ETH to Lido Finance.
- Lido stakes Alice's ETH on the Ethereum network.
- Alice receives stETH (Lido's staked ETH token) representing her staked ETH and earns staking rewards passively.
- Alice can transfer, trade, or lend stETH without affecting her staked ETH.

**2. Lending/Borrowing:** Put your crypto to work or access additional funds.

**Transaction Flow:**

- Bob deposits DAI (stablecoin) on Aave.
- Charles borrows USDC (another stablecoin) from Aave, offering DAI as collateral.
- Bob earns interest on his deposited DAI.
- Charles pays interest on his borrowed USDC.

**3. Decentralized Exchanges (DEXs):** Swap tokens directly, peer-to-peer.

**Transaction Flow:**

- Diana wants to exchange ETH for LINK.
- Diana interacts with Uniswap, providing ETH to a liquidity pool containing ETH and LINK.
- The pool automatically exchanges Diana's ETH for LINK based on the current pool ratio.
- Diana receives LINK, while the pool's composition adjusts slightly.

**4. Cross-Chain Bridges:** Bridge your tokens across different blockchain networks.

**Transaction Flow:**

- Eric wants to move his BTC from Bitcoin to Ethereum.
- Eric uses Ren Protocol, locking his BTC on the Bitcoin network.
- Ren mints an equivalent amount of wrapped BTC (renBTC) on Ethereum.
- Eric can now use renBTC on Ethereum platforms, like DeFi protocols.

**5. Collateralized Debt Positions (CDPs):** Mint stablecoins against your crypto holdings.

**Transaction Flow:**

- Sarah deposits ETH in MakerDAO.
- Sarah mints DAI (stablecoin) based on the value of her locked ETH.
- Sarah can spend or use DAI like any other stablecoin.
- If the value of Sarah's ETH falls, she may need to add more ETH to maintain her CDP or face liquidation.

**6. Real-World Asset (RWA) Protocols:** Integrate real-world assets into DeFi.

**Transaction Flow:**

- David tokenizes his house on Real World Finance.
- Investors purchase RWF tokens representing ownership fractions of the house.
- David receives funding based on the token sale.
- Investors earn rental income distributed proportionally to their token holdings.

**7. Services:** Provide various DeFi-related services beyond core financial functions.

**Transaction Flow:**

- Developers integrate The Graph's indexing protocol into their DeFi app.
- The Graph indexes on-chain data for the app, making it searchable and easier to analyze.
- Developers pay in tokens for The Graph's services.
- Users benefit from a smoother and more efficient DeFi experience.

**8. Yield Aggregators:** Optimize your token deposits across different protocols for maximized yield.

**Transaction Flow:**

- Emily deposits her tokens into Yearn Finance.
- Yearn automatically distributes Emily's tokens across various lending protocols seeking the highest potential returns.
- Emily receives a single yield stream representing the combined earnings from all protocols.
- Yearn charges a small fee for its management services.

**9. Derivatives:** Trade on the future price of crypto assets with leverage.

**Transaction Flow:**

- Mark opens a long position on Perpetual Protocol, betting that ETH price will rise.
- Mark uses borrowed capital (leverage) to amplify his potential gains.
- If ETH price goes up, Mark's profits are multiplied.
- If ETH price goes down, Mark's losses are amplified and he may face liquidation.

**10. Yield Farming:** Lock your tokens in liquidity pools to earn rewards in protocol tokens.

**Transaction Flow:**

- Lisa provides ETH and DAI to a Uniswap liquidity pool.
- Traders swap ETH and DAI through the pool, generating trading fees.
- Lisa earns a portion of the fees based on her share of the pool.
- Additionally, Lisa receives Uniswap (UNI) tokens as a reward for providing liquidity.

**11. Launchpads:** Raise funds for new DeFi projects through token sales.

**Transaction Flow:**

- John wants to invest in a promising new AMM project launching on Polkastarter.
- John deposits BUSD into the Polkastarter pool before the token sale starts.
- During the sale, John receives tokens of the new project based on his BUSD contribution and the project's fundraising goals.
- John can hold, trade, or use the new tokens depending on the project's functionality.

**12. Staking Pools:** Secure the network and earn rewards by staking your tokens.

**Transaction Flow:**

- Alice stakes her ADA in a Cardano stake pool operated by a staking provider.
- The stake pool participates in validating transactions on the Cardano network.
- Alice earns ADA rewards based on the pool's performance and her stake size.
- Alice can unstake her ADA at any time with a designated waiting period.

**13. Indexes:** Track the performance of a basket of DeFi tokens like a diversified ETF.

**Transaction Flow:**

- David purchases shares of the DeFi Pulse Index (DPI) on a DEX.
- DPI holds a basket of various DeFi tokens representing the overall market sector.
- As the underlying DeFi tokens change in price, the value of DPI fluctuates accordingly.
- David's DPI holding reflects his exposure to the DeFi market without managing individual investments.

**14. Privacy Protocols:** Enhance transaction privacy on blockchains, hiding sender and receiver addresses.

**Transaction Flow:**

- Sarah sends Zcash to her friend Mark using a shielded transaction.
- Zcash uses advanced cryptography to obscure the transaction details, including sender and receiver addresses, while verifying the transfer amount.
- Mark receives the Zcash without anyone on the public blockchain knowing who sent it.

**15. Payment Protocols:** Facilitate everyday payments using cryptocurrencies.

**Transaction Flow:**

- Emily buys coffee with BTC at a cafe that accepts Lightning Network payments.
- Emily's phone instantly sends a micropayment through the Lightning Network, a fast and cheap Bitcoin payment layer.
- The cafe receives the BTC payment without incurring high transaction fees associated with on-chain Bitcoin transfers.

**16. Insurance Protocols:** Protect your DeFi assets from financial losses like hacks or smart contract bugs.

**Transaction Flow:**

- Kevin buys insurance for his DAI deposits on Nexus Mutual, a decentralized insurance protocol.
- Kevin pays a small premium based on the coverage amount and risk parameters.
- If his DAI deposit is lost due to a covered event, Kevin receives compensation from the mutual insurance pool.

**17. NFT Lending:** Borrow or lend Non-Fungible Tokens (NFTs) for various purposes.

**Transaction Flow:**

- Lisa owns a rare CryptoPunk NFT and wants to access liquidity without selling it.
- Lisa deposits her NFT on NFTfi, a lending platform, and receives a stablecoin loan in exchange.
- A borrower rents Lisa's NFT for a predetermined period, paying interest on the loan amount.
- After the rental period ends, Lisa receives back her NFT and the original loan amount with accrued interest.

**18. NFT Marketplaces:** Trade, buy, or sell unique NFTs like digital art or collectibles.

**Transaction Flow:**

- Alex discovers a coveted piece of digital art on OpenSea.
- Alex bids on the NFT using ETH or another accepted cryptocurrency.
- If Alex wins the auction, the NFT ownership transfers to their digital wallet, and the seller receives the cryptocurrency payment.
- OpenSea charges a small fee on each transaction to facilitate the marketplace.

**19. Leveraged Farming:** Amplify your yield farming returns by borrowing additional capital and investing it in various protocols.

**Transaction Flow:**

- Michael deposits his stablecoins into Alpha Homora, a leveraged yield farming platform.
- Alpha Homora automatically borrows more stablecoins based on Michael's collateral and allocates the combined funds across multiple DeFi protocols seeking high yield opportunities.
- Michael's potential returns are amplified due to leverage, but he also faces greater risks of losses during market downturns.

**20. Algorithmic Stablecoins:** Maintain stablecoin value through algorithms without requiring collateralization.

**Transaction Flow:**

- Sarah purchases UST (TerraUSD) from a DEX, believing its price will remain pegged to the US dollar.
- UST uses an algorithm that automatically buys or sells Terra (LUNA) tokens on the open market to maintain UST's peg.
- This mechanism helps stabilize UST's price amidst market fluctuations.

**21. Decentralized Autonomous Organizations (DAOs):** Coordinate projects and communities


## Blockchain Transaction Actions

| Action | Example | Risk |
|---|---|---|
| **Check pre-state** | Reading account balance before transferring funds | Inconsistent state due to race conditions (if multiple calls try to access the same data simultaneously) |
| **Perform computations** | Calculating interest owed on a loan | Integer overflow or underflow (if calculations exceed the data type's limit) |
| **Transfer values** | Moving tokens from one account to another | Unauthorized access to funds (if security vulnerabilities allow unauthorized users to initiate transfers) |
| **Call to other contracts** | Interacting with a decentralized exchange | Reentrancy attacks (where a contract calls itself recursively, potentially stealing funds) |
| **Emit events** | Logging a transaction on the blockchain | Information leakage (sensitive data might be unintentionally revealed in event logs) |
| **Update storage** | Storing data associated with a contract | Data corruption (if bugs or errors lead to incorrect data being stored) |
| **Access oracles** | Retrieving data from external sources (e.g., real-world data) | Data manipulation or oracle failure (if the external data source is compromised or malfunctions) |
| **Manage tokens** | Creating, destroying, or modifying token properties | Unintended consequences (e.g., creating an inflationary token supply or accidentally locking funds) |
| **Upgrade contracts** | Updating contract logic | New vulnerabilities or broken compatibility (introducing new security risks or making the contract incompatible with other parts of the system) |


## Yield Farming

**Yield Farming 101:**

* **Yield Farmers = Liquidity Providers (LPs):** You add your tokens to a pool, providing liquidity for others to trade on Decentralized Exchanges (DEXs) and lending protocols.
* **Liquidy Provision (LPing):** The act of adding tokens to a pool.
* **Rewards:** You earn fees from traders and borrowers in the form of tokens or coins.

**The Catch: Impermanent Loss (IL)**

* This occurs when the price of your tokens changes after you deposit them in a pool. If the prices diverge significantly, you might see a "loss" compared to simply holding your tokens.
* **Example:** You deposit $100 worth of Token A and $100 worth of Token B in a pool. Token A doubles in price, while Token B stays the same. You might "lose" some Token B to maintain the pool's balance, but the overall value of your position could still increase.

**Metrics for Evaluating Pools:**

* **High Trading Volume:** More trades = more fees for you.
* **Low Total Value Locked (TVL):** Less competition for fees.
* **Rebalancing:** Some pools automatically adjust your position to optimize returns.
* **Impermanent Loss (IL):** Compare potential IL to expected rewards.
* **Loss-vs-Rebalancing (LVR):** How much arbitrageurs "eat" into your rewards.
* **Loss-vs-Staking (LVS):** Compare yield farming to simply staking your tokens.

**Yield Farming Platforms:**

* **Simplify the process:** Manage your LP positions automatically.
* **Examples:** Kamino Finance (Solana), Grizzly Finance (BSC, Ethereum), ETHSaver (Ethereum).

**Alternatives:**

* **Hedge Funds & Prop Firms:** Professionals manage your LP positions for a fee.

**Key Takeaways:**

* Yield farming can be lucrative, but understand the risks (IL, LVR).
* Consider trading volume, TVL, and rebalancing when choosing pools.
* Weigh IL and LVR against expected rewards and compare to staking.
* Platforms or professional management can ease the complexity.



## AMM

* [defi-basics-amm](https://medium.com/@navin346/market-makers-episode2-cex-dex-series-efa364903821)
* [defi-basics-amm-cp](https://medium.com/@navin346/cex-dex-series-episode3-automated-market-makers-ab2f1185e74a)


### Linear
* [cex-dex](https://medium.com/@navin346/cex-dex-series-episode3-automated-market-makers-ab2f1185e74a)
* [capital-efficiency](https://www.linkedin.com/pulse/optimizing-defi-liquidity-deep-dive-capital-efficiency-gogol-dl2ze/)
* [bonding-curves](https://medium.com/thoughtchains/on-bonding-curves-as-funding-mechanisms-a0812b22cc3d)



### Sigmoid
* [working-with-sigmoid-solidity](https://dev.to/leveorxyz/working-with-sigmoid-in-solidity-3g38)
* [actual-sigmoid-solidity](https://easonchaijw.medium.com/an-actual-sigmoid-function-in-solidity-6b78d002d8be)
* [advanced-price-mechanisms](https://medium.com/molecule-blog/designing-different-fundraising-scenarios-with-sigmoidal-token-bonding-curves-ceafc734ed97)

## Lending


* [blockchain-basics](https://medium.com/@navin346/blockchain-basics-46818c95e1ad)
* [defi-basics-lending](https://medium.com/@navin346/defi-bascis-5-lending-borrowing-in-defi-0310e1079e77)
* [defi-basics-stable-swap](https://medium.com/@navin346/defi-bascis-4-stableswap-dc91ef2f8963)
* [funding-rates](https://medium.com/@navin346/funding-rates-in-crypto-vs-trad-fi-b39991790064)

## RWA


* [gold-finch](https://medium.com/@navin346/introduction-to-goldfinch-a-non-collaterised-defi-protocol-19748a8bb94d)
* [financial-exchanges](https://medium.com/@navin346/a-brief-note-on-financial-exchanges-4b4e9efceef7)
